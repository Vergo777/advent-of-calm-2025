{
  "$schema": "https://calm.finos.org/release/1.1/meta/calm.json",
  "adrs": [
    "docs/adr/0001-use-message-queue-for-async-processing.md",
    "docs/adr/0002-use-oauth2-for-api-authentication.md"
  ],
  "unique-id": "ecommerce-platform",
  "name": "E-Commerce Order Processing Platform",
  "description": "A comprehensive microservices-based e-commerce platform for managing customer orders, inventory, and payments with secure API gateway routing and data persistence",
  "metadata": {
    "owner": "ecommerce-team@example.com",
    "version": "1.0.0",
    "created": "2025-12-07",
    "description": "E-commerce order processing platform",
    "tags": [
      "ecommerce",
      "microservices",
      "orders"
    ],
    "monitoring": {
      "grafana-dashboard": "https://grafana.example.com/d/ecommerce-overview",
      "kibana-logs": "https://kibana.example.com/app/discover#/ecommerce-*",
      "pagerduty-service": "https://pagerduty.example.com/services/ECOMMERCE",
      "statuspage": "https://status.example.com",
      "metrics-retention": "30 days",
      "log-retention": "90 days"
    }
  },
  "controls": {
    "security": {
      "description": "Data encryption and secure communication requirements",
      "requirements": [
        {
          "requirement-url": "https://internal-policy.example.com/security/encryption-at-rest",
          "config": {
            "algorithm": "AES-256",
            "scope": "all-data-stores"
          }
        },
        {
          "requirement-url": "https://internal-policy.example.com/security/tls-1-3-minimum",
          "config-url": "https://configs.example.com/security/tls-config.yaml"
        }
      ]
    },
    "performance": {
      "description": "System-wide performance and scalability requirements",
      "requirements": [
        {
          "requirement-url": "https://internal-policy.example.com/performance/response-time-sla",
          "config": {
            "p99-latency-ms": 200,
            "p95-latency-ms": 100
          }
        },
        {
          "requirement-url": "https://internal-policy.example.com/performance/availability-target",
          "config-url": "https://configs.example.com/infra/ha-config.yaml"
        }
      ]
    },
    "resilience": {
      "description": "System-wide resilience and availability requirements",
      "requirements": [
        {
          "requirement-url": "https://internal-policy.example.com/resilience/high-availability",
          "config": {
            "uptime-percentage": 99.9,
            "sla-category": "critical"
          }
        }
      ]
    }
  },
  "flows": [
    {
      "unique-id": "order-processing-flow",
      "name": "Customer Order Processing",
      "description": "End-to-end flow from customer placing an order to payment confirmation",
      "metadata": {
        "business-impact": "Customers cannot complete purchases - direct revenue loss",
        "degraded-behavior": "Orders queue in message broker; processed when service recovers",
        "customer-communication": "Display 'Order processing delayed' message",
        "sla": "99.9% availability, 30s p99 latency"
      },
      "transitions": [
        {
          "relationship-unique-id": "customer-to-load-balancer",
          "sequence-number": 1,
          "description": "Customer submits order via web interface",
          "direction": "source-to-destination"
        },
        {
          "relationship-unique-id": "load-balancer-to-gateway-1",
          "sequence-number": 2,
          "description": "Load balancer forwards to Gateway 1",
          "direction": "source-to-destination"
        },
        {
          "relationship-unique-id": "api-gateway-1-to-order-service",
          "sequence-number": 3,
          "description": "API Gateway routes order to Order Service",
          "direction": "source-to-destination"
        },
        {
          "relationship-unique-id": "order-service-to-order-queue",
          "sequence-number": 4,
          "description": "Order Service publishes payment request to queue",
          "direction": "source-to-destination"
        },
        {
          "relationship-unique-id": "order-queue-to-payment-service",
          "sequence-number": 5,
          "description": "Payment Service consumes payment request from queue",
          "direction": "source-to-destination"
        }
      ],
      "controls": {
        "audit": {
          "description": "All order processing steps must be logged for audit compliance",
          "requirements": [
            {
              "requirement-url": "https://internal-policy.example.com/audit/transaction-logging",
              "config": {
                "log-level": "detailed",
                "retention-days": 365
              }
            }
          ]
        }
      }
    },
    {
      "unique-id": "inventory-check-flow",
      "name": "Inventory Stock Check",
      "description": "Admin checks and updates inventory stock levels",
      "metadata": {
        "business-impact": "Stock levels may be inaccurate - risk of overselling",
        "degraded-behavior": "Fall back to cached inventory; flag orders for manual review",
        "customer-communication": "Display 'Stock availability being confirmed'",
        "sla": "99.5% availability, 500ms p99 latency"
      },
      "transitions": [
        {
          "relationship-unique-id": "admin-to-load-balancer",
          "sequence-number": 1,
          "description": "Admin requests inventory status",
          "direction": "source-to-destination"
        },
        {
          "relationship-unique-id": "load-balancer-to-gateway-2",
          "sequence-number": 2,
          "description": "Load balancer forwards to Gateway 2",
          "direction": "source-to-destination"
        },
        {
          "relationship-unique-id": "api-gateway-2-to-inventory-service",
          "sequence-number": 3,
          "description": "Route to inventory service",
          "direction": "source-to-destination"
        },
        {
          "relationship-unique-id": "inventory-service-to-inventory-database",
          "sequence-number": 4,
          "description": "Query current stock levels",
          "direction": "source-to-destination"
        },
        {
          "relationship-unique-id": "inventory-service-to-inventory-database",
          "sequence-number": 5,
          "description": "Return stock data",
          "direction": "destination-to-source"
        },
        {
          "relationship-unique-id": "api-gateway-2-to-inventory-service",
          "sequence-number": 6,
          "description": "Return inventory report",
          "direction": "destination-to-source"
        }
      ]
    }
  ],
  "nodes": [
    {
      "unique-id": "customer",
      "node-type": "actor",
      "name": "Customer",
      "description": "End user who browses products, places orders, and manages purchases through the e-commerce platform"
    },
    {
      "unique-id": "admin",
      "node-type": "actor",
      "name": "Administrator",
      "description": "System administrator who manages inventory, monitors orders, and performs system maintenance"
    },
    {
      "unique-id": "load-balancer",
      "node-type": "service",
      "name": "Global Load Balancer",
      "description": "High-availability entry point that distributes traffic across multiple API Gateway instances",
      "metadata": {
        "ha-tier": "tier-1",
        "load-balancing-algorithm": "round-robin",
        "redundancy": "active-active",
        "owner": "platform-team",
        "oncall-slack": "#oncall-platform",
        "health-endpoint": "/health",
        "runbook": "https://runbooks.example.com/load-balancer",
        "tier": "tier-1",
        "dependencies": [
          "api-gateway-1",
          "api-gateway-2"
        ],
        "dashboard": "https://grafana.example.com/d/lb-metrics",
        "log-query": "service:load-balancer",
        "alerts": [
          "LB_High_Latency",
          "LB_5xx_Spike"
        ]
      },
      "interfaces": [
        {
          "unique-id": "lb-endpoint",
          "protocol": "HTTPS",
          "host": "api.ecommerce.example.com",
          "port": 443,
          "path": "/"
        }
      ]
    },
    {
      "unique-id": "api-gateway-1",
      "node-type": "service",
      "name": "API Gateway - Instance 1",
      "description": "Primary API Gateway instance handling routing and authentication",
      "metadata": {
        "version": "1.5.0",
        "framework": "Kong",
        "ha-tier": "tier-1",
        "redundancy": "active-active",
        "owner": "platform-team",
        "oncall-slack": "#oncall-platform",
        "health-endpoint": "/health",
        "runbook": "https://runbooks.example.com/api-gateway",
        "tier": "tier-1",
        "dependencies": [
          "order-service",
          "inventory-service"
        ],
        "dashboard": "https://grafana.example.com/d/gw-metrics",
        "log-query": "service:api-gateway-1",
        "alerts": [
          "GW_Auth_Failures",
          "GW_RateLimit_Exceeded"
        ]
      },
      "interfaces": [
        {
          "unique-id": "gateway-1-endpoint",
          "protocol": "HTTPS",
          "host": "gw-1.internal.example.com",
          "port": 8443
        }
      ]
    },
    {
      "unique-id": "api-gateway-2",
      "node-type": "service",
      "name": "API Gateway - Instance 2",
      "description": "Secondary API Gateway instance for high availability",
      "metadata": {
        "version": "1.5.0",
        "framework": "Kong",
        "ha-tier": "tier-1",
        "redundancy": "active-active",
        "owner": "platform-team",
        "oncall-slack": "#oncall-platform",
        "health-endpoint": "/health",
        "runbook": "https://runbooks.example.com/api-gateway",
        "tier": "tier-1",
        "dependencies": [
          "order-service",
          "inventory-service"
        ],
        "dashboard": "https://grafana.example.com/d/gw-metrics",
        "log-query": "service:api-gateway-2",
        "alerts": [
          "GW_Auth_Failures",
          "GW_RateLimit_Exceeded"
        ]
      },
      "interfaces": [
        {
          "unique-id": "gateway-2-endpoint",
          "protocol": "HTTPS",
          "host": "gw-2.internal.example.com",
          "port": 8443
        }
      ]
    },
    {
      "unique-id": "order-service",
      "node-type": "service",
      "name": "Order Service",
      "description": "Manages order creation, processing, status tracking, and order history for customers",
      "metadata": {
        "version": "2.0.0",
        "runtime": "Java 17",
        "framework": "Spring Boot",
        "protocol": "HTTPS",
        "data-classification": "sensitive",
        "tech-owner": "Order Management Team",
        "repository": "https://github.com/example-org/order-service",
        "deployment-type": "container",
        "sla-tier": "tier-1",
        "owner": "order-team",
        "oncall-slack": "#oncall-orders",
        "health-endpoint": "/actuator/health",
        "runbook": "https://runbooks.example.com/order-service",
        "tier": "tier-1",
        "dependencies": [
          "order-database-primary",
          "order-queue"
        ],
        "failure-modes": [
          {
            "symptom": "HTTP 503 errors",
            "likely-cause": "Database connection pool exhausted",
            "check": "Check connection pool metrics in Grafana dashboard",
            "remediation": "Scale up service replicas or increase pool size",
            "escalation": "If persists > 5min, page DBA team"
          },
          {
            "symptom": "High latency (>2s p99)",
            "likely-cause": "Payment service degradation",
            "check": "Check payment-service health and circuit breaker status",
            "remediation": "Circuit breaker should open automatically; check fallback queue",
            "escalation": "Contact payments-team if circuit breaker not triggering"
          },
          {
            "symptom": "Order validation failures",
            "likely-cause": "Inventory service returning stale data",
            "check": "Verify inventory-service cache TTL and database replication lag",
            "remediation": "Clear inventory cache; check replica sync status",
            "escalation": "Contact platform-team for cache issues"
          }
        ],
        "dashboard": "https://grafana.example.com/d/order-metrics",
        "log-query": "service:order-service",
        "alerts": [
          "Order_Creation_Failed",
          "Order_SLA_Breach"
        ]
      },
      "interfaces": [
        {
          "unique-id": "order-service-api",
          "protocol": "HTTPS",
          "host": "orders.internal.example.com",
          "port": 8443,
          "path": "/api/orders"
        }
      ],
      "controls": {
        "resilience": {
          "description": "Fault tolerance and self-healing requirements for the order service",
          "requirements": [
            {
              "requirement-url": "https://internal-policy.example.com/resilience/circuit-breaker",
              "config": {
                "failure-rate-threshold-percentage": 50,
                "wait-duration-in-open-state-seconds": 10,
                "permitted-number-of-calls-in-half-open-state": 10
              }
            }
          ]
        }
      }
    },
    {
      "unique-id": "inventory-service",
      "node-type": "service",
      "name": "Inventory Service",
      "description": "Manages product inventory, stock levels, warehouse locations, and inventory synchronization across channels",
      "metadata": {
        "version": "1.8.0",
        "runtime": "Node.js 18",
        "framework": "Express",
        "protocol": "HTTPS",
        "data-classification": "sensitive",
        "tech-owner": "Inventory Team",
        "repository": "https://github.com/example-org/inventory-service",
        "deployment-type": "container",
        "sla-tier": "tier-2",
        "owner": "inventory-team",
        "oncall-slack": "#oncall-inventory",
        "health-endpoint": "/health",
        "runbook": "https://runbooks.example.com/inventory-service",
        "tier": "tier-2",
        "dependencies": [
          "inventory-database"
        ],
        "failure-modes": [
          {
            "symptom": "HTTP 500 errors",
            "likely-cause": "MongoDB replica set failover or primary unavailability",
            "check": "Check MongoAtlas logs and db-connection-lag",
            "remediation": "Primary selection should be automatic; check service retry logic",
            "escalation": "Page DBA team if write-lock detected"
          },
          {
            "symptom": "Stale stock data",
            "likely-cause": "Cache synchronization failure",
            "check": "Compare DB vs Cache stock count for sample product",
            "remediation": "Flush Redis cache for affected SKUs",
            "escalation": "Contact platform-team if cache invalidation service is hung"
          },
          {
            "symptom": "Latency spikes",
            "likely-cause": "Indexing overhead or full table scan",
            "check": "Check slow query logs in MongoDB",
            "remediation": "Kill long-running queries; review index coverage",
            "escalation": "Contact DBA team for query optimization"
          }
        ],
        "dashboard": "https://grafana.example.com/d/inventory-metrics",
        "log-query": "service:inventory-service",
        "alerts": [
          "Inventory_Low_Stock_Sync_Fail",
          "Inventory_DB_Latency"
        ]
      },
      "interfaces": [
        {
          "unique-id": "inventory-service-api",
          "protocol": "HTTPS",
          "host": "inventory.internal.example.com",
          "port": 8443,
          "path": "/api/inventory"
        }
      ]
    },
    {
      "unique-id": "payment-service",
      "node-type": "service",
      "name": "Payment Service",
      "description": "Handles payment processing, PCI compliance, payment gateway integration, and transaction security for all customer payments",
      "metadata": {
        "version": "3.1.0",
        "runtime": "Go 1.20",
        "protocol": "HTTPS",
        "data-classification": "highly-sensitive",
        "tech-owner": "Payment & Finance Team",
        "repository": "https://github.com/example-org/payment-service",
        "deployment-type": "container",
        "sla-tier": "tier-1",
        "compliance": "PCI-DSS Level 1",
        "owner": "payments-team",
        "oncall-slack": "#oncall-payments",
        "health-endpoint": "/health",
        "runbook": "https://runbooks.example.com/payment-service",
        "tier": "tier-1",
        "dependencies": [
          "order-queue"
        ],
        "failure-modes": [
          {
            "symptom": "HTTP 502/504 errors",
            "likely-cause": "Downstream payment gateway (Stripe/Adyen) timeout",
            "check": "Check external provider status page and egress latency",
            "remediation": "Retry with exponential backoff; check circuit breaker",
            "escalation": "Page payment-oncall if gateway is down > 10min"
          },
          {
            "symptom": "High queue depth",
            "likely-cause": "Consumer processing lag",
            "check": "Check RabbitMQ unsent message count",
            "remediation": "Horizontal auto-scaling for payment-service instances",
            "escalation": "Manual intervention if queue doesn't clear in 15min"
          },
          {
            "symptom": "Auth failures",
            "likely-cause": "PCI-compliant token vault access issues",
            "check": "Check secret management service logs",
            "remediation": "Rotate vault client token; check IAM permissions",
            "escalation": "Immediate page for Security/Platform-team"
          }
        ],
        "dashboard": "https://grafana.example.com/d/payment-metrics",
        "log-query": "service:payment-service",
        "alerts": [
          "Payment_Gateway_Timeout",
          "PCI_Compliance_Check_Fail"
        ]
      },
      "interfaces": [
        {
          "unique-id": "payment-service-api",
          "protocol": "HTTPS",
          "host": "payments.internal.example.com",
          "port": 8443,
          "path": "/api/payments"
        }
      ],
      "controls": {
        "compliance": {
          "description": "PCI-DSS compliance for payment processing",
          "requirements": [
            {
              "requirement-url": "https://www.pcisecuritystandards.org/documents/PCI-DSS-v4.0",
              "config-url": "https://configs.example.com/compliance/pci-dss-config.json"
            }
          ]
        }
      }
    },
    {
      "unique-id": "order-database-cluster",
      "node-type": "system",
      "name": "Order Database Cluster",
      "description": "High-availability PostgreSQL cluster with primary-replica replication for data durability and read scalability",
      "metadata": {
        "ha-mode": "primary-replica",
        "replication-type": "asynchronous"
      },
      "controls": {
        "resilience": {
          "description": "Failover and data recovery requirements for the database cluster",
          "requirements": [
            {
              "requirement-url": "https://internal-policy.example.com/resilience/failover",
              "config": {
                "recovery-time-objective-minutes": 15,
                "recovery-point-objective-minutes": 5,
                "automatic-failover": true
              }
            }
          ]
        }
      }
    },
    {
      "unique-id": "order-database-primary",
      "node-type": "database",
      "name": "Order Database (Primary)",
      "description": "Primary database instance handling all write operations and serving as the source for replication",
      "metadata": {
        "version": "14.0",
        "type": "PostgreSQL",
        "role": "primary",
        "data-classification": "sensitive",
        "backup-frequency": "daily",
        "replication": "source",
        "backup-schedule": "0 0 * * *",
        "restore-time": "30 minutes",
        "dba-contact": "db-admins@example.com"
      },
      "interfaces": [
        {
          "unique-id": "order-db-primary-connection",
          "protocol": "JDBC",
          "host": "postgres-primary.db.internal.example.com",
          "port": 5432,
          "database": "orders_db"
        }
      ]
    },
    {
      "unique-id": "order-database-replica",
      "node-type": "database",
      "name": "Order Database (Replica)",
      "description": "Read-only replica instance for scaling read operations and providing failover capacity",
      "metadata": {
        "version": "14.0",
        "type": "PostgreSQL",
        "role": "replica",
        "replication-mode": "async",
        "data-classification": "sensitive",
        "backup-schedule": "0 0 * * *",
        "restore-time": "30 minutes",
        "dba-contact": "db-admins@example.com"
      },
      "interfaces": [
        {
          "unique-id": "order-db-replica-connection",
          "protocol": "JDBC",
          "host": "postgres-replica.db.internal.example.com",
          "port": 5432,
          "database": "orders_db"
        }
      ]
    },
    {
      "unique-id": "message-broker",
      "node-type": "system",
      "name": "Message Broker (RabbitMQ)",
      "description": "Centralized message broker for asynchronous communication between services",
      "metadata": {
        "adr": "docs/adr/0001-use-message-queue-for-async-processing.md",
        "tech-stack": "RabbitMQ",
        "ha-mode": "mirrored-queues"
      },
      "interfaces": [
        {
          "unique-id": "amqp-interface",
          "protocol": "AMQP",
          "port": 5672,
          "description": "AMQP 0-9-1 endpoint"
        }
      ]
    },
    {
      "unique-id": "order-queue",
      "node-type": "node",
      "name": "Order Payment Queue",
      "description": "Durable queue for storing payment processing requests",
      "metadata": {
        "adr": "docs/adr/0001-use-message-queue-for-async-processing.md",
        "durability": "persistent"
      }
    },
    {
      "unique-id": "inventory-database",
      "node-type": "database",
      "name": "Inventory Database",
      "description": "Database for storing product catalog, stock levels, warehouse assignments, and inventory transactions",
      "metadata": {
        "version": "6.0",
        "type": "MongoDB",
        "data-classification": "sensitive",
        "backup-frequency": "daily",
        "replication": "sharded",
        "backup-schedule": "0 2 * * *",
        "restore-time": "60 minutes",
        "dba-contact": "db-admins@example.com"
      },
      "interfaces": [
        {
          "unique-id": "inventory-db-connection",
          "protocol": "TCP",
          "host": "mongo-inventory.db.internal.example.com",
          "port": 27017,
          "database": "inventory_db"
        }
      ]
    },
    {
      "unique-id": "ecommerce-system",
      "node-type": "system",
      "name": "E-Commerce Platform",
      "description": "Complete e-commerce platform encompassing API gateway, order processing, inventory management, and payment services with supporting databases"
    }
  ],
  "relationships": [
    {
      "unique-id": "customer-to-load-balancer",
      "description": "Directs customer traffic to the global load balancer",
      "relationship-type": {
        "interacts": {
          "actor": "customer",
          "nodes": [
            "load-balancer"
          ]
        }
      }
    },
    {
      "unique-id": "admin-to-load-balancer",
      "description": "Directs admin traffic to the global load balancer",
      "relationship-type": {
        "interacts": {
          "actor": "admin",
          "nodes": [
            "load-balancer"
          ]
        }
      }
    },
    {
      "unique-id": "load-balancer-to-gateway-1",
      "description": "Distributes traffic to API Gateway Instance 1",
      "relationship-type": {
        "connects": {
          "source": {
            "node": "load-balancer",
            "interfaces": [
              "lb-endpoint"
            ]
          },
          "destination": {
            "node": "api-gateway-1",
            "interfaces": [
              "gateway-1-endpoint"
            ]
          }
        }
      }
    },
    {
      "unique-id": "load-balancer-to-gateway-2",
      "description": "Distributes traffic to API Gateway Instance 2",
      "relationship-type": {
        "connects": {
          "source": {
            "node": "load-balancer",
            "interfaces": [
              "lb-endpoint"
            ]
          },
          "destination": {
            "node": "api-gateway-2",
            "interfaces": [
              "gateway-2-endpoint"
            ]
          }
        }
      }
    },
    {
      "unique-id": "api-gateway-1-to-order-service",
      "description": "Routes order requests from Gateway 1 to the order service",
      "relationship-type": {
        "connects": {
          "source": {
            "node": "api-gateway-1",
            "interfaces": [
              "gateway-1-endpoint"
            ]
          },
          "destination": {
            "node": "order-service",
            "interfaces": [
              "order-service-api"
            ]
          }
        }
      },
      "protocol": "HTTPS"
    },
    {
      "unique-id": "api-gateway-2-to-inventory-service",
      "description": "Routes inventory requests from Gateway 2 to the inventory service",
      "relationship-type": {
        "connects": {
          "source": {
            "node": "api-gateway-2",
            "interfaces": [
              "gateway-2-endpoint"
            ]
          },
          "destination": {
            "node": "inventory-service",
            "interfaces": [
              "inventory-service-api"
            ]
          }
        }
      },
      "protocol": "HTTPS"
    },
    {
      "unique-id": "order-service-to-order-db-primary",
      "description": "Writes order data to the primary database",
      "relationship-type": {
        "connects": {
          "source": {
            "node": "order-service",
            "interfaces": [
              "order-service-api"
            ]
          },
          "destination": {
            "node": "order-database-primary",
            "interfaces": [
              "order-db-primary-connection"
            ]
          }
        }
      },
      "protocol": "JDBC",
      "metadata": {
        "operation": "write",
        "monitoring": true
      }
    },
    {
      "unique-id": "order-service-to-order-db-replica",
      "description": "Reads order history and status from the replica database",
      "relationship-type": {
        "connects": {
          "source": {
            "node": "order-service",
            "interfaces": [
              "order-service-api"
            ]
          },
          "destination": {
            "node": "order-database-replica",
            "interfaces": [
              "order-db-replica-connection"
            ]
          }
        }
      },
      "protocol": "JDBC",
      "metadata": {
        "operation": "read",
        "monitoring": true
      }
    },
    {
      "unique-id": "order-db-cluster-composed-of",
      "description": "Defines the nodes within the order database cluster",
      "relationship-type": {
        "composed-of": {
          "container": "order-database-cluster",
          "nodes": [
            "order-database-primary",
            "order-database-replica"
          ]
        }
      }
    },
    {
      "unique-id": "inventory-service-to-inventory-database",
      "description": "Reads and writes inventory data to the inventory database",
      "relationship-type": {
        "connects": {
          "source": {
            "node": "inventory-service",
            "interfaces": [
              "inventory-service-api"
            ]
          },
          "destination": {
            "node": "inventory-database",
            "interfaces": [
              "inventory-db-connection"
            ]
          }
        }
      },
      "protocol": "TCP",
      "metadata": {
        "latency-sla": "< 150ms",
        "monitoring": true,
        "connection-pooling": true
      }
    },
    {
      "unique-id": "order-service-to-order-queue",
      "description": "Publishes payment requests to the RabbitMQ queue",
      "relationship-type": {
        "connects": {
          "source": {
            "node": "order-service",
            "interfaces": [
              "order-service-api"
            ]
          },
          "destination": {
            "node": "order-queue"
          }
        }
      },
      "protocol": "AMQP",
      "metadata": {
        "adr": "docs/adr/0001-use-message-queue-for-async-processing.md",
        "delivery-guarantee": "at-least-once"
      }
    },
    {
      "unique-id": "order-queue-to-payment-service",
      "description": "Consumes payment requests from the RabbitMQ queue",
      "relationship-type": {
        "connects": {
          "source": {
            "node": "order-queue"
          },
          "destination": {
            "node": "payment-service",
            "interfaces": [
              "payment-service-api"
            ]
          }
        }
      },
      "protocol": "AMQP",
      "metadata": {
        "adr": "docs/adr/0001-use-message-queue-for-async-processing.md",
        "acknowledgement": "manual"
      }
    },
    {
      "unique-id": "message-broker-composed-of",
      "description": "Groups queues within the message broker",
      "relationship-type": {
        "composed-of": {
          "container": "message-broker",
          "nodes": [
            "order-queue"
          ]
        }
      }
    },
    {
      "unique-id": "ecommerce-system-composed-of",
      "description": "Contains all core platform services and supporting infrastructure",
      "relationship-type": {
        "composed-of": {
          "container": "ecommerce-system",
          "nodes": [
            "load-balancer",
            "api-gateway-1",
            "api-gateway-2",
            "order-service",
            "inventory-service",
            "payment-service",
            "order-database-cluster",
            "inventory-database",
            "message-broker"
          ]
        }
      }
    }
  ]
}